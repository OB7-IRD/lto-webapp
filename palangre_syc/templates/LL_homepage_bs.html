{% extends "base_bs5.html" %}
{% load static %}


{% block title %}

Palangre aux Seychelles

{% endblock title %}

{% block navigation %}
{% endblock navigation %}

{% block heading %}
<h1>Page d'accueil pour les données de palangre</h1>
{% endblock heading %}

{% block content %}


    <section>
        <h2>Mise à jour des données de références</h2>
        <p>
            en chargant cette page, normalement on se connecte à la base et on génère un TOKEN
        </p>
        <div>
            {% if token %}
                <p>Sortie json de la connexion et extraction du token: {{ token }}</p>
            {% else %}
                <p>Failed to fetch data from the API.</p>
            {% endif %}
        </div>
    
        <!-- Button to trigger data update -->
        <form method="post" action="{% url 'checking logbook' %}">
            {% csrf_token %}
            <button type="submit"> lancer le chargement des données </button>
        </form>
        
    </section>

   

<div class ="">

    <div class = "container-fluid">
           

        <div class = "row">
            <div class = "col-md-4">
              
                  <div class="">
                    <h3> Données sélectionnées </h3>
                    Vous ête ainsi localisé dans <b> l'océan {{ocean | safe}} </b>
                    et vous être dans le programme <b> {{programme | safe }} </b>
                
                </div> 

                <div class= "table-responsive">
                    <h3 class = "">  </h3>
                    <p>Le journal de pêche que vous souhaitez envoyer est celui du 
                    {% for index, row in df_date.iterrows %}
                        {% if row.Logbook_name == 'Month' %}
                            <!-- Affichage de la valeur du mois -->
                            {% with month_value=row.Value %}
                                <b>{{ month_value }} 
                                    {% if row.Value == 1 %}
                                        er
                                    {% else %}
                                        ème
                                    {% endif %}</b> mois
                            {% endwith %}
                        {% elif row.Logbook_name == 'Year' %}
                            <!-- Affichage de l'année -->
                            {% with year_value=row.Value %}
                                de l'année <b>{{ year_value }}</b></p>
                            {% endwith %}
                        {% endif %}
                    {% endfor %}
                    
                    {% comment %} <table class="table" border="1" >
                        <thead>
                            <tr>
                                {% for col in df_date.columns %}
                                    <th scope="col"> {{ col }} </th>
                                {% endfor %}
                            </tr>
                        </thead>
                        <tbody>
                            {% for index, row in df_date.iterrows %}
                                <tr>
                                    {% for cell in row %}
                                    <td scope="row"> {{ cell }} </td>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table> {% endcomment %}
                </div>
                <br>
                <div class = "table-responsive">
                    <h3> Report information </h3>

                    <table border="1" class = "table">
                        {% comment %} <thead>
                            <tr>
                                {% for col in df_report.columns %}
                                    <th scope="col"> {{ col }} </th>
                                {% endfor %}
                            </tr>
                        </thead> {% endcomment %}
                        <tbody>
                            {% for index, row in df_report.iterrows %}
                                <tr>
                                    {% for cell in row %}
                                    <td scope="row"> {{ cell }} </td>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <br>
                <div class = "table-responsive">
                    <h3> Cruise information </h3>
                    <table border="1" class = "table">
                        {% comment %} <thead>
                            <tr>
                                {% for col in df_cruise.columns %}
                                    <th scope="col">
                                        {{ col }}
                                    </th>
                                {% endfor %}
                            </tr>
                        </thead> {% endcomment %}
                        <tbody>
                            {% for index, row in df_cruise.iterrows %}
                                <tr>
                                    {% for cell in row %}
                                    <td scope="row">
                                        {{ cell }}
                                    </td>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="col-md-4">
                <div class= "table-responsive">                    
                    <h3 class = ""> Vessel information </h3>
                    
                    <table border="1" class = "table">
                        {% comment %} <thead>
                            <tr>
                                {% for col in df_vessel.columns %}
                                    <th scope="col"> {{ col }} </th>
                                {% endfor %}
                            </tr>
                        </thead> {% endcomment %}
                        <tbody>
                            {% for index, row in df_vessel.iterrows %}
                                <tr>
                                    {% for cell in row %}
                                    <td scope="row"> {{ cell }} </td>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <br>  
                <div class = "table-responsive">
                    <h3> Gear information </h3>
                    <table border="1" class = "table">
                        {% comment %} <thead>
                            <tr>
                                {% for col in df_gear.columns %}
                                    <th scope = "col"> {{ col }} </th>
                                {% endfor %}
                            </tr>
                        </thead> {% endcomment %}
                        <tbody>
                            {% for index, row in df_gear.iterrows %}
                                <tr>
                                    {% for cell in row %}
                                    <td scope = "row"> {{ cell }} </td>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    
                    {% if df_gear|length == 2 %}

                        <table border="1" class = "table">
                            {% comment %} <thead>
                                <tr>
                                    {% for col in df_gear.0.columns %}
                                        <th scope = "col"> {{ col }} </th>
                                    {% endfor %}
                                </tr>
                            </thead> {% endcomment %}
                            <tbody>
                                {% for index, row in df_gear.0.iterrows %}
                                    <tr>
                                        {% for cell in row %}
                                        <td scope = "row"> {{ cell }} </td>
                                        {% endfor %}
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>

                        <div class="alert alert-danger" role="alert">
                            <p>{{ df_gear.1 }}</p>
                        </div>
                    {% endif %}
                    
                </div>
            </div>

            <div class="col-md-4">
                <div class = "table-responsive">
                    <h3> Line material </h3>
                    <table border="1" class = "table">
                        {% comment %} <thead>
                            <tr>
                                {% for col in df_line.columns %}
                                    <th scope = "col">{{ col }} </th>
                                {% endfor %}
                            </tr>
                        </thead> {% endcomment %}
                        <tbody>
                            {% for index, row in df_line.iterrows %}
                                <tr>
                                    {% for cell in row %}
                                    <td scope = "row">{{ cell }}</td>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <br>
                <div class = "table-responsive">
                    <h3> Target species </h3>
                    <table border="1" class = "table">
                        {% comment %} <thead>
                            <tr>
                                {% for col in df_target.columns %}
                                    <th scope ="col"> {{ col }} </th>
                                {% endfor %}
                            </tr>
                        </thead> {% endcomment %}
                        <tbody>
                            {% for index, row in df_target.iterrows %}
                                <tr>
                                    {% for cell in row %}
                                    <td scope = "row"> {{ cell }} </td>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <br>
                <div class = "table-responsive">
                    <h3> Type of baits </h3>
                    <table border="1" class = "table">
                        {% comment %} <thead>
                            <tr>
                                {% for col in df_bait.columns %}
                                    <th scope = "col"> {{ col }} </th>
                                {% endfor %}
                            </tr>
                        </thead> {% endcomment %}
                        <tbody>
                            {% for index, row in df_bait.iterrows %}
                                <tr>
                                    {% for cell in row %}
                                    <td scope = "row">{{ cell }}</td>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>    
            </div>
        </div>
    </div>
</div>
    


<div class="container-fluid">
    <div class="row">
      <div class="col-md-6 text-start">
        <a href="../logbook" class="btn btn-danger"> Retour et modification </a>
      </div>
  
      <div class="col-md-6 text-end">
        <a href="send_logbook2Observe" class="btn btn-success"> Envoyer le logbook </a>
      </div>
    </div>
  </div>


<br><br><br>

    <div>
        <h3> all data - dataframe </h3>
       <!-- {{ df_vessel | safe }} -->  
        <table border="1" class = "table">
            <thead>
                <tr>
                    {% for col in df_activity.columns %}
                        <th scope = "col"> {{ col }} </th> 
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for index, row in df_activity.iterrows %}
                    <tr>
                        {% for cell in row %}
                        <td scope = "row"> {{ cell }} </td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

{% endblock content %}

{% block footer %}
<p>&copy; En cours de développement </p>
{% endblock footer %}
